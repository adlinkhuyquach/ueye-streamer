<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ueye_stream: ueye_stream</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ueye_stream
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ueye_stream </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>ueye stream is a library for a standard RTP multimedia stream. This library can be used to build streaming applications. The library can be used to stream MJPEG and H.264 video.</p>
<h1><a class="anchor" id="install_sec"></a>
How to use the library</h1>
<h2><a class="anchor" id="step1"></a>
Step 1: Initialize streaming library and create rtsp server</h2>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> port = 1554;</div><div class="line"><a class="code" href="ueye__stream_8h.html#a41387238997acfa3b87ed37df13aab7c">is_Stream</a>(<a class="code" href="ueye__stream_8h.html#a0df337521d27020b8fc2e4d2fef5b232a355bf20a8f92af9746d01f93d786227e">IS_STREAM_INIT</a>, (<span class="keywordtype">void</span>*)&amp;port, <span class="keyword">sizeof</span>(port));</div></div><!-- fragment --> <h2><a class="anchor" id="step2"></a>
Step 2: Add a session</h2>
<div class="fragment"><div class="line"><a class="code" href="struct_i_s___s_e_s_s_i_o_n___i_n_f_o.html">IS_SESSION_INFO</a> sessionInfo;</div><div class="line">sessionInfo.<a class="code" href="struct_i_s___s_e_s_s_i_o_n___i_n_f_o.html#ac181984621b81fd4909c55b7ab5e4f9f">cbSizeOfStruct</a> = <span class="keyword">sizeof</span>(<a class="code" href="struct_i_s___s_e_s_s_i_o_n___i_n_f_o.html">IS_SESSION_INFO</a>);</div><div class="line">strcpy(sessionInfo.<a class="code" href="struct_i_s___s_e_s_s_i_o_n___i_n_f_o.html#af54359cf9a4916da6fbeb1bd024c5a0a">strDescription</a>, <span class="stringliteral">&quot;Simple ueye stream&quot;</span>);</div><div class="line">strcpy(sessionInfo.<a class="code" href="struct_i_s___s_e_s_s_i_o_n___i_n_f_o.html#abbc7c9bbd4f5ea975bf7bd11b6bb4200">strInfo</a>, sensorInfo.strSensorName);</div><div class="line">strcpy(sessionInfo.<a class="code" href="struct_i_s___s_e_s_s_i_o_n___i_n_f_o.html#af696b85f089e0a1009639c25e8a732b3">strName</a>, <span class="stringliteral">&quot;ueye_stream&quot;</span>);</div><div class="line"></div><div class="line">nRet = <a class="code" href="ueye__stream_8h.html#a41387238997acfa3b87ed37df13aab7c">is_Stream</a>(<a class="code" href="ueye__stream_8h.html#a0df337521d27020b8fc2e4d2fef5b232ac0ca790658a367e8550a1e9ea9b1ae14">IS_STREAM_ADD_SESSION</a>, (<span class="keywordtype">void</span>*)&amp;sessionInfo, <span class="keyword">sizeof</span>(sessionInfo));</div></div><!-- fragment --> <h2><a class="anchor" id="step3"></a>
Step 3: Add a video stream to the session</h2>
<div class="fragment"><div class="line"><a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html">IS_STREAM_VIDEO_CONFIGURATION</a> videoConfiguration;</div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#ac181984621b81fd4909c55b7ab5e4f9f">cbSizeOfStruct</a> = <span class="keyword">sizeof</span>(<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html">IS_STREAM_VIDEO_CONFIGURATION</a>);</div><div class="line"></div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#a0e35b8d74e1ac59b82f506293654d26d">framerate</a> = 10;</div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#a873ba9440e3e9786eb1476a3bfa536d0">bitrate</a> = 500000;</div><div class="line"></div><div class="line"></div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#abfd67382f21e669d54570b4de046e217">srcCodec</a> = <a class="code" href="ueye__stream_8h.html#aab276195c6ec4c5d852be7d2d08936b1ae9d02e8805ee33e96f21c14a34fd4c40">IS_STREAM_CODEC_NONE</a>;</div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#a7e7fdf395cb1b3138cc609c3f1a79cab">srcHeight</a> = rectAoi.s32Height;</div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#a4870d9a36c1807f11cb979aa80fddfe7">srcWidth</a> = rectAoi.s32Width;</div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#aa527794fec37720b36d3604a991bc7aa">srcPixelformat</a> = <a class="code" href="ueye__stream_8h.html#ae3f01971b03e8d467fcdd9c3cb00390aa9bb1a305e9001c7554c8fd4b581980aa">IS_STREAM_FMT_BGR24</a>;</div><div class="line"></div><div class="line"></div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#a8463c0f278d5f5860ada4db424b7d9a4">dstHeight</a> = rectAoi.s32Height / 2;</div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#acb0addc3e77e823dc52e7429090a3d18">dstWidth</a> = rectAoi.s32Width / 2;</div><div class="line">videoConfiguration.<a class="code" href="struct_i_s___s_t_r_e_a_m___v_i_d_e_o___c_o_n_f_i_g_u_r_a_t_i_o_n.html#aaa20935011af286457578777866a9852">dstCodec</a> = <a class="code" href="ueye__stream_8h.html#aab276195c6ec4c5d852be7d2d08936b1adef4604aa0174135eab3359890b2b4c4">IS_STREAM_CODEC_MJPEG</a>;</div><div class="line"></div><div class="line"></div><div class="line"><a class="code" href="struct_i_s___s_t_r_e_a_m___i_n_f_o.html">IS_STREAM_INFO</a> streamInfo;</div><div class="line">streamInfo.<a class="code" href="struct_i_s___s_t_r_e_a_m___i_n_f_o.html#ac181984621b81fd4909c55b7ab5e4f9f">cbSizeOfStruct</a> = <span class="keyword">sizeof</span>(<a class="code" href="struct_i_s___s_t_r_e_a_m___i_n_f_o.html">IS_STREAM_INFO</a>);</div><div class="line">streamInfo.<a class="code" href="struct_i_s___s_t_r_e_a_m___i_n_f_o.html#aee91953809e9035915054ef986f7661e">idSession</a> = sessionInfo.<a class="code" href="struct_i_s___s_e_s_s_i_o_n___i_n_f_o.html#aee91953809e9035915054ef986f7661e">idSession</a>;</div><div class="line"></div><div class="line">streamInfo.<a class="code" href="struct_i_s___s_t_r_e_a_m___i_n_f_o.html#aa13b25a9820283d4fd098efa6b624f10">streamType</a> = <a class="code" href="ueye__stream_8h.html#a948a4ec927784fbd29d867efaeb124ecacc7c3d076e0835167f077cf8fcdd1fbd">IS_STREAM_TYPE_VIDEO</a>;</div><div class="line">streamInfo.<a class="code" href="struct_i_s___s_t_r_e_a_m___i_n_f_o.html#a0518bd1c83dd570e5b26f90edfa94efe">pStreamData</a> = &amp;videoConfiguration;</div><div class="line"></div><div class="line">nRet = <a class="code" href="ueye__stream_8h.html#a41387238997acfa3b87ed37df13aab7c">is_Stream</a>(<a class="code" href="ueye__stream_8h.html#a0df337521d27020b8fc2e4d2fef5b232abcb9e9900569407558993d2dacd88ce3">IS_STREAM_ADD_STREAM</a>, (<span class="keywordtype">void</span>*)&amp;streamInfo, <span class="keyword">sizeof</span>(streamInfo));</div></div><!-- fragment --> <h2><a class="anchor" id="step4"></a>
Step 4: Submit frame data to the stream</h2>
<div class="fragment"><div class="line"><a class="code" href="struct_i_s___s_t_r_e_a_m___p_a_y_l_o_a_d___d_a_t_a.html">IS_STREAM_PAYLOAD_DATA</a> streamData;</div><div class="line">streamData.<a class="code" href="struct_i_s___s_t_r_e_a_m___p_a_y_l_o_a_d___d_a_t_a.html#ac181984621b81fd4909c55b7ab5e4f9f">cbSizeOfStruct</a> = <span class="keyword">sizeof</span>(<a class="code" href="struct_i_s___s_t_r_e_a_m___p_a_y_l_o_a_d___d_a_t_a.html">IS_STREAM_PAYLOAD_DATA</a>);</div><div class="line">streamData.<a class="code" href="struct_i_s___s_t_r_e_a_m___p_a_y_l_o_a_d___d_a_t_a.html#aaf2599b3eef445bee5a6bd50569435f7">pData</a> = streamData;</div><div class="line">streamData.<a class="code" href="struct_i_s___s_t_r_e_a_m___p_a_y_l_o_a_d___d_a_t_a.html#a188ec41bcb1c6f49f522f3597127a49d">cbSizeOfData</a> = sizeOfStreamData;</div><div class="line">streamData.<a class="code" href="struct_i_s___s_t_r_e_a_m___p_a_y_l_o_a_d___d_a_t_a.html#aee91953809e9035915054ef986f7661e">idSession</a> = sessionInfo.<a class="code" href="struct_i_s___s_e_s_s_i_o_n___i_n_f_o.html#aee91953809e9035915054ef986f7661e">idSession</a>;</div><div class="line">streamData.<a class="code" href="struct_i_s___s_t_r_e_a_m___p_a_y_l_o_a_d___d_a_t_a.html#ad720ded8b81a82e5bb3f9b86951bb8c9">idStream</a> = streamInfo.<a class="code" href="struct_i_s___s_t_r_e_a_m___i_n_f_o.html#ad720ded8b81a82e5bb3f9b86951bb8c9">idStream</a>;</div><div class="line"></div><div class="line">nRet = <a class="code" href="ueye__stream_8h.html#a41387238997acfa3b87ed37df13aab7c">is_Stream</a>(<a class="code" href="ueye__stream_8h.html#a0df337521d27020b8fc2e4d2fef5b232ace95de0fbd524b134860f7a2f6933a19">IS_STREAM_SUBMIT_DATA</a>, (<span class="keywordtype">void</span>*)&amp;streamData, <span class="keyword">sizeof</span>(streamData));</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
